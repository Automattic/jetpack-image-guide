function t(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function c(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}l((i=i.apply(t,e||[])).next())}))}class e{constructor(t,e,n=null){this.node=t,this.getURLCallback=e,this.fetch=null!=n?n:window.fetch.bind(window)}getURL(){return this.getURLCallback(this.node)}getSizeOnPage(){const{width:t,height:e}=this.node.getBoundingClientRect();return{width:Math.round(t),height:Math.round(e)}}getFileSize(e){return t(this,void 0,void 0,(function*(){const[t,{width:n,height:i}]=yield Promise.all([this.fetchFileWeight(e),this.fetchFileDimensions(e)]);return{width:n,height:i,weight:t}}))}getPotentialSavings(t,e){const n=this.getOversizedRatio(t,e);return n<=1?null:Math.round(t.weight-t.weight/n)}getExpectedSize(t){const e=window.devicePixelRatio||1;return{width:Math.round(t.width*e),height:Math.round(t.height*e)}}getOversizedRatio(t,e){if(0===t.width||0===t.height)return 1;const{width:n,height:i}=this.getExpectedSize(e);return 0===n||0===i?1:t.width*t.height/(n*i)}fetchFileWeight(e){return t(this,void 0,void 0,(function*(){const t=yield this.fetch(e);return t.ok?parseInt(t.headers.get("content-length"),10)/1024:(console.log(`Can't get image size for ${e} likely due to a CORS error.`),-1)}))}fetchFileDimensions(e){return t(this,void 0,void 0,(function*(){const t=new Image;return t.src=e,new Promise(((e,n)=>{t.onload=()=>{e({width:Math.round(t.width),height:Math.round(t.height)})},t.onerror=()=>{n("Unable to load image.")}}))}))}isImageTiny(){return t(this,void 0,void 0,(function*(){try{const t=65,e=yield this.fetchFileDimensions(this.getURL());return e.width<t||e.height<t}catch(t){return!0}}))}}function n(t){return r(t.currentSrc)?t.currentSrc:r(t.src)?t.src:null}function i(t){const e=getComputedStyle(t).backgroundImage.match(/url\(\s*(['"])(.*?)\1\s*\)/i),n=window.location.href.split("#")[0];return e&&e[2]&&e[2]!==n&&r(e[2])?e[2]:null}function o(o,r=null){return t(this,void 0,void 0,(function*(){return function(t){return t.filter((t=>t instanceof HTMLImageElement||t instanceof HTMLElement&&"none"!==getComputedStyle(t).backgroundImage))}(o).map((t=>t instanceof HTMLImageElement?new e(t,n,r):t instanceof HTMLElement&&i(t)?new e(t,i):null)).filter((t=>null!==t))}))}function r(t){if(t.startsWith("/")){return!t.split("?")[0].endsWith(".svg")}try{const e=new URL(t);return"http:"===e.protocol||"https:"===e.protocol}catch(t){return!1}}function s(){}const c=t=>t;function l(t){return t()}function a(){return Object.create(null)}function u(t){t.forEach(l)}function d(t){return"function"==typeof t}function h(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let f;function p(t,e){return f||(f=document.createElement("a")),f.href=e,t===f.href}function g(t,...e){if(null==t)return s;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function m(t){let e;return g(t,(t=>e=t))(),e}function v(t,e,n){t.$$.on_destroy.push(g(e,n))}function $(t,e,n,i){return t[1]&&i?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function w(t){const e="string"==typeof t&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const b="undefined"!=typeof window;let y=b?()=>window.performance.now():()=>Date.now(),x=b?t=>requestAnimationFrame(t):s;const k=new Set;function _(t){k.forEach((e=>{e.c(t)||(k.delete(e),e.f())})),0!==k.size&&x(_)}function z(t){let e;return 0===k.size&&x(_),{promise:new Promise((n=>{k.add(e={c:t,f:n})})),abort(){k.delete(e)}}}function S(t,e){t.appendChild(e)}function C(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function E(t){const e=j("style");return function(t,e){S(t.head||t,e),e.sheet}(C(t),e),e.sheet}function L(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function j(t){return document.createElement(t)}function O(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function T(t){return document.createTextNode(t)}function M(){return T(" ")}function R(){return T("")}function I(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function U(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function F(t,e){e=""+e,t.data!==e&&(t.data=e)}function A(t,e,n,i){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function H(t,e,n){t.classList[n?"add":"remove"](e)}function B(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,i,e),o}const N=new Map;let D,W=0;function V(t,e,n,i,o,r,s,c=0){const l=16.666/i;let a="{\n";for(let t=0;t<=1;t+=l){const i=e+(n-e)*r(t);a+=100*t+`%{${s(i,1-i)}}\n`}const u=a+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${c}`,h=C(t),{stylesheet:f,rules:p}=N.get(h)||function(t,e){const n={stylesheet:E(e),rules:{}};return N.set(t,n),n}(h,t);p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${d} ${i}ms linear ${o}ms 1 both`,W+=1,d}function G(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-i.length;o&&(t.style.animation=i.join(", "),W-=o,W||x((()=>{W||(N.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&P(e)})),N.clear())})))}function q(t){D=t}function Z(){if(!D)throw new Error("Function called outside component initialization");return D}function K(t){Z().$$.on_mount.push(t)}function X(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const Y=[],J=[];let Q=[];const tt=[],et=Promise.resolve();let nt=!1;function it(t){Q.push(t)}const ot=new Set;let rt,st=0;function ct(){if(0!==st)return;const t=D;do{try{for(;st<Y.length;){const t=Y[st];st++,q(t),lt(t.$$)}}catch(t){throw Y.length=0,st=0,t}for(q(null),Y.length=0,st=0;J.length;)J.pop()();for(let t=0;t<Q.length;t+=1){const e=Q[t];ot.has(e)||(ot.add(e),e())}Q.length=0}while(Y.length);for(;tt.length;)tt.pop()();nt=!1,ot.clear(),q(t)}function lt(t){if(null!==t.fragment){t.update(),u(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(it)}}function at(){return rt||(rt=Promise.resolve(),rt.then((()=>{rt=null}))),rt}function ut(t,e,n){t.dispatchEvent(B(`${e?"intro":"outro"}${n}`))}const dt=new Set;let ht;function ft(){ht={r:0,c:[],p:ht}}function pt(){ht.r||u(ht.c),ht=ht.p}function gt(t,e){t&&t.i&&(dt.delete(t),t.i(e))}function mt(t,e,n,i){if(t&&t.o){if(dt.has(t))return;dt.add(t),ht.c.push((()=>{dt.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}else i&&i()}const vt={duration:0};function $t(t,e,n){const i={direction:"in"};let o,r,l=e(t,n,i),a=!1,u=0;function h(){o&&G(t,o)}function f(){const{delay:e=0,duration:n=300,easing:i=c,tick:d=s,css:f}=l||vt;f&&(o=V(t,0,1,n,e,i,f,u++)),d(0,1);const p=y()+e,g=p+n;r&&r.abort(),a=!0,it((()=>ut(t,!0,"start"))),r=z((e=>{if(a){if(e>=g)return d(1,0),ut(t,!0,"end"),h(),a=!1;if(e>=p){const t=i((e-p)/n);d(t,1-t)}}return a}))}let p=!1;return{start(){p||(p=!0,G(t),d(l)?(l=l(i),at().then(f)):f())},invalidate(){p=!1},end(){a&&(h(),a=!1)}}}function wt(t,e,n,i){const o={direction:"both"};let r=e(t,n,o),l=i?0:1,a=null,h=null,f=null;function p(){f&&G(t,f)}function g(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function m(e){const{delay:n=0,duration:i=300,easing:o=c,tick:d=s,css:m}=r||vt,v={start:y()+n,b:e};e||(v.group=ht,ht.r+=1),a||h?h=v:(m&&(p(),f=V(t,l,e,i,n,o,m)),e&&d(0,1),a=g(v,i),it((()=>ut(t,e,"start"))),z((e=>{if(h&&e>h.start&&(a=g(h,i),h=null,ut(t,a.b,"start"),m&&(p(),f=V(t,l,a.b,a.duration,0,o,r.css))),a)if(e>=a.end)d(l=a.b,1-l),ut(t,a.b,"end"),h||(a.b?p():--a.group.r||u(a.group.c)),a=null;else if(e>=a.start){const t=e-a.start;l=a.a+a.d*o(t/a.duration),d(l,1-l)}return!(!a&&!h)})))}return{run(t){d(r)?at().then((()=>{r=r(o),m(t)})):m(t)},end(){p(),a=h=null}}}const bt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function yt(t){t&&t.c()}function xt(t,e,n,i){const{fragment:o,after_update:r}=t.$$;o&&o.m(e,n),i||it((()=>{const e=t.$$.on_mount.map(l).filter(d);t.$$.on_destroy?t.$$.on_destroy.push(...e):u(e),t.$$.on_mount=[]})),r.forEach(it)}function kt(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];Q.forEach((i=>-1===t.indexOf(i)?e.push(i):n.push(i))),n.forEach((t=>t())),Q=e}(n.after_update),u(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function _t(t,e){-1===t.$$.dirty[0]&&(Y.push(t),nt||(nt=!0,et.then(ct)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function zt(t,e,n,i,o,r,c,l=[-1]){const d=D;q(t);const h=t.$$={fragment:null,ctx:[],props:r,update:s,not_equal:o,bound:a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:a(),dirty:l,skip_bound:!1,root:e.target||d.$$.root};c&&c(h.root);let f=!1;if(h.ctx=n?n(t,e.props||{},((e,n,...i)=>{const r=i.length?i[0]:n;return h.ctx&&o(h.ctx[e],h.ctx[e]=r)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](r),f&&_t(t,e)),n})):[],h.update(),f=!0,u(h.before_update),h.fragment=!!i&&i(h.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);h.fragment&&h.fragment.l(t),t.forEach(P)}else h.fragment&&h.fragment.c();e.intro&&gt(t.$$.fragment),xt(t,e.target,e.anchor,e.customElement),ct()}q(d)}class St{$destroy(){kt(this,1),this.$destroy=s}$on(t,e){if(!d(e))return s;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ct=[];function Et(t,e=s){let n;const i=new Set;function o(e){if(h(t,e)&&(t=e,n)){const e=!Ct.length;for(const e of i)e[1](),Ct.push(e,t);if(e){for(let t=0;t<Ct.length;t+=2)Ct[t][0](Ct[t+1]);Ct.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(r,c=s){const l=[r,c];return i.add(l),1===i.size&&(n=e(o)||s),r(t),()=>{i.delete(l),0===i.size&&n&&(n(),n=null)}}}}function Lt(t,e,n){const i=!Array.isArray(t),o=i?[t]:t,r=e.length<2;return c=t=>{let n=!1;const c=[];let l=0,a=s;const h=()=>{if(l)return;a();const n=e(i?c[0]:c,t);r?t(n):a=d(n)?n:s},f=o.map(((t,e)=>g(t,(t=>{c[e]=t,l&=~(1<<e),n&&h()}),(()=>{l|=1<<e}))));return n=!0,h(),function(){u(f),a(),n=!1}},{subscribe:Et(n,c).subscribe};var c}const Pt="jetpack-boost-guide",jt={active:"Active",paused:"Paused"};let Ot=localStorage.getItem(Pt);Ot&&jt[Ot]||(localStorage.setItem(Pt,"Active"),Ot="active");const{set:Tt,update:Mt,subscribe:Rt}=Et(Ot);Rt((t=>{localStorage.setItem(Pt,t)}));const It={subscribe:Rt,set:Tt,update:Mt,cycle:()=>{Mt((t=>{const e=Object.keys(jt),n=e.indexOf(t);return e[(n+1)%e.length]}))}},Ut=Lt(It,(t=>jt[t]));class Ft{static setTracksCallback(t){Ft.tracksCallback=t}static trackImageOutcome(e){return t(this,void 0,void 0,(function*(){return new Promise((t=>{e.loading.subscribe((n=>{if(!n){const n=m(e.oversizedRatio),i=function(t){return t>4?"red":t>2.5?"yellow":"green"}(n),o=m(e.fileSize),r=m(e.sizeOnPage),s=m(e.expectedSize),c=m(e.potentialSavings),l=m(e.url),a={severity:i,oversized_ratio:n,file_weight:o.weight,file_width:o.width,file_height:o.height,size_on_page_width:r.width,size_on_page_height:r.height,expected_width:s.width,expected_height:s.height,potential_savings:c,image_url:l};Ft.tracksCallback("image_guide_image_outcome",Object.assign(Object.assign({},a),{window_width:window.innerWidth,window_height:window.innerHeight,device_pixel_ratio:window.devicePixelRatio})),t(a)}}))}))}))}static trackPage(e){return t(this,void 0,void 0,(function*(){if(!e.length||Ft.trackingComplete)return;Ft.trackingComplete=!0;const t=e.map(Ft.trackImageOutcome),n=yield Promise.all(t),i=n.reduce(((t,e)=>t+(e.potential_savings||0)),0);Ft.tracksCallback("image_guide_page_outcome",{total_potential_savings:i,red_severity_count:n.filter((t=>"red"===t.severity)).length,yellow_severity_count:n.filter((t=>"yellow"===t.severity)).length,green_severity_count:n.filter((t=>"green"===t.severity)).length,window_width:window.innerWidth,window_height:window.innerHeight,device_pixel_ratio:window.devicePixelRatio})}))}static trackInitialState(){Ft.tracksCallback("image_guide_initial_ui_state",{image_guide_state:m(It)})}static trackUIStateChange(){Ft.tracksCallback("image_guide_ui_state_change",{image_guide_state:m(It)})}}Ft.trackingComplete=!1;class At{constructor(t){this.loading=Et(!0),this.currentSrc="",this.image=t,this.node=t.node;this.url=Et(t.getURL()),this.fileSize=Et({width:0,height:0,weight:0}),this.sizeOnPage=Et({width:0,height:0}),this.potentialSavings=this.derivePotentialSavings(),this.oversizedRatio=this.deriveOversizedRatio(),this.expectedSize=this.deriveExpectedSize()}deriveOversizedRatio(){return Lt([this.fileSize,this.sizeOnPage],(([t,e])=>this.image.getOversizedRatio(t,e)))}deriveExpectedSize(){return Lt(this.sizeOnPage,(t=>this.image.getExpectedSize(t)))}derivePotentialSavings(){return Lt([this.fileSize,this.sizeOnPage],(([t,e])=>this.image.getPotentialSavings(t,e)))}updateDimensions(){return t(this,void 0,void 0,(function*(){const t=this.image.getSizeOnPage();this.sizeOnPage.set(t),yield this.maybeUpdateWeight()}))}maybeUpdateWeight(){return t(this,void 0,void 0,(function*(){if(this.image.getURL()===this.currentSrc)return;let t;this.loading.set(!0),this.currentSrc=this.image.getURL();try{t=yield this.image.getFileSize(this.currentSrc)}catch(e){t={weight:-1,height:-1,width:-1}}this.url.set(this.currentSrc),this.fileSize.set(t),this.loading.set(!1)}))}}function Ht(t){const e=1.70158;return--t*t*((e+1)*t+e)+1}function Bt(t){const e=t-1;return e*e*e+1}function Nt(t,{delay:e=0,duration:n=400,easing:i=c}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:t=>"opacity: "+t*o}}function Dt(t,{delay:e=0,duration:n=400,easing:i=Bt,x:o=0,y:r=0,opacity:s=0}={}){const c=getComputedStyle(t),l=+c.opacity,a="none"===c.transform?"":c.transform,u=l*(1-s),[d,h]=w(o),[f,p]=w(r);return{delay:e,duration:n,easing:i,css:(t,e)=>`\n\t\t\ttransform: ${a} translate(${(1-t)*d}${h}, ${(1-t)*f}${p});\n\t\t\topacity: ${l-u*e}`}}function Wt(t){let e,n,i,o,r;return{c(){e=j("div"),n=O("svg"),i=O("path"),o=O("path"),r=O("path"),U(i,"d","M55.4 107.8C84.3397 107.8 107.8 84.3397 107.8 55.4C107.8 26.4603 84.3397 3 55.4 3C26.4603 3 3 26.4603 3 55.4C3 84.3397 26.4603 107.8 55.4 107.8Z"),U(i,"fill",t[1]),U(o,"d","M58 46.6V97.4L84.2 46.6H58Z"),U(o,"fill","white"),U(r,"d","M52.7 64.1V13.4L26.6 64.1H52.7Z"),U(r,"fill","white"),U(n,"viewBox","0 0 110 110"),U(n,"fill","none"),U(n,"xmlns","http://www.w3.org/2000/svg"),A(e,"width",t[0]+"px"),A(e,"height",t[0]+"px"),U(e,"class","svelte-f6jc8")},m(t,s){L(t,e,s),S(e,n),S(n,i),S(n,o),S(n,r)},p(t,[n]){2&n&&U(i,"fill",t[1]),1&n&&A(e,"width",t[0]+"px"),1&n&&A(e,"height",t[0]+"px")},i:s,o:s,d(t){t&&P(e)}}}function Vt(t,e,n){let{size:i=16}=e,{bg:o="#069E08"}=e;return t.$$set=t=>{"size"in t&&n(0,i=t.size),"bg"in t&&n(1,o=t.bg)},[i,o]}class Gt extends St{constructor(t){super(),zt(this,t,Vt,Wt,h,{size:0,bg:1})}}function qt(t){let e,n,i,o;return n=new Gt({props:{size:12,bg:"transparent"}}),{c(){e=j("div"),yt(n.$$.fragment),U(e,"class","spinner svelte-2eb8gc")},m(t,i){L(t,e,i),xt(n,e,null),o=!0},p:s,i(t){o||(gt(n.$$.fragment,t),i&&i.end(1),o=!0)},o(t){mt(n.$$.fragment,t),i=function(t,e,n){const i={direction:"out"};let o,r=e(t,n,i),l=!0;const a=ht;function h(){const{delay:e=0,duration:n=300,easing:i=c,tick:d=s,css:h}=r||vt;h&&(o=V(t,1,0,n,e,i,h));const f=y()+e,p=f+n;it((()=>ut(t,!1,"start"))),z((e=>{if(l){if(e>=p)return d(0,1),ut(t,!1,"end"),--a.r||u(a.c),!1;if(e>=f){const t=i((e-f)/n);d(1-t,t)}}return l}))}return a.r+=1,d(r)?at().then((()=>{r=r(i),h()})):h(),{end(e){e&&r.tick&&r.tick(1,0),l&&(o&&G(t,o),l=!1)}}}(e,Nt,{duration:300}),o=!1},d(t){t&&P(e),kt(n),t&&i&&i.end()}}}class Zt extends St{constructor(t){super(),zt(this,t,null,qt,h,{})}}function Kt(t){let e,n;return{c(){e=O("svg"),n=O("path"),U(n,"stroke-linecap","round"),U(n,"stroke-linejoin","round"),U(n,"stroke-width","2"),U(n,"d","M5 13l4 4L19 7"),U(e,"class","w-6 h-6 svelte-jkeb2"),U(e,"fill","none"),U(e,"stroke","white"),U(e,"width","18"),U(e,"height","18"),U(e,"viewBox","0 0 24 24"),U(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){L(t,e,i),S(e,n)},p:s,i:s,o:s,d(t){t&&P(e)}}}class Xt extends St{constructor(t){super(),zt(this,t,null,Kt,h,{})}}function Yt(t){let e,n,i;return n=new Zt({}),{c(){e=j("div"),yt(n.$$.fragment),U(e,"class","bubble-inner svelte-18vhu7m")},m(t,o){L(t,e,o),xt(n,e,null),i=!0},p:s,i(t){i||(gt(n.$$.fragment,t),i=!0)},o(t){mt(n.$$.fragment,t),i=!1},d(t){t&&P(e),kt(n)}}}function Jt(t){let e,n,i,o,r,s;const c=[ee,te,Qt],l=[];function a(t,e){return t[0]>9?0:t[0]>.99?1:2}return i=a(t),o=l[i]=c[i](t),{c(){e=j("div"),n=j("div"),o.c(),U(n,"class","label"),U(e,"class","bubble-inner svelte-18vhu7m")},m(t,o){L(t,e,o),S(e,n),l[i].m(n,null),s=!0},p(t,e){let r=i;i=a(t),i===r?l[i].p(t,e):(ft(),mt(l[r],1,1,(()=>{l[r]=null})),pt(),o=l[i],o?o.p(t,e):(o=l[i]=c[i](t),o.c()),gt(o,1),o.m(n,null))},i(t){s||(gt(o),r||it((()=>{r=$t(n,Nt,{delay:200,duration:300}),r.start()})),s=!0)},o(t){mt(o),s=!1},d(t){t&&P(e),l[i].d()}}}function Qt(t){let e,n;return{c(){e=j("span"),e.textContent="<",n=T(" 1x"),A(e,"font-size","0.75em")},m(t,i){L(t,e,i),L(t,n,i)},p:s,i:s,o:s,d(t){t&&P(e),t&&P(n)}}}function te(t){let e,n,i,o;const r=[ie,ne],s=[];function c(t,e){return"normal"===t[1]?0:1}return e=c(t),n=s[e]=r[e](t),{c(){n.c(),i=R()},m(t,n){s[e].m(t,n),L(t,i,n),o=!0},p(t,o){let l=e;e=c(t),e===l?s[e].p(t,o):(ft(),mt(s[l],1,1,(()=>{s[l]=null})),pt(),n=s[e],n?n.p(t,o):(n=s[e]=r[e](t),n.c()),gt(n,1),n.m(i.parentNode,i))},i(t){o||(gt(n),o=!0)},o(t){mt(n),o=!1},d(t){s[e].d(t),t&&P(i)}}}function ee(t){let e,n,i=Math.floor(t[0])+"";return{c(){e=T(i),n=T("x")},m(t,i){L(t,e,i),L(t,n,i)},p(t,n){1&n&&i!==(i=Math.floor(t[0])+"")&&F(e,i)},i:s,o:s,d(t){t&&P(e),t&&P(n)}}}function ne(t){let e,n,i=t[0].toFixed(1)+"";return{c(){e=T(i),n=T("x")},m(t,i){L(t,e,i),L(t,n,i)},p(t,n){1&n&&i!==(i=t[0].toFixed(1)+"")&&F(e,i)},i:s,o:s,d(t){t&&P(e),t&&P(n)}}}function ie(t){let e,n;return e=new Xt({}),{c(){yt(e.$$.fragment)},m(t,i){xt(e,t,i),n=!0},p:s,i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){kt(e,t)}}}function oe(t){let e,n,i,o,r,s,c,l,a;const u=[Jt,Yt],d=[];function h(t,e){return!1===t[3]?0:1}return i=h(t),o=d[i]=u[i](t),{c(){e=j("div"),n=j("div"),o.c(),U(n,"class","bubble svelte-18vhu7m"),U(e,"class",r="interaction-area "+t[1]+" svelte-18vhu7m")},m(o,r){L(o,e,r),S(e,n),d[i].m(n,null),t[10](e),c=!0,l||(a=I(e,"mouseenter",t[7]),l=!0)},p(s,[l]){let a=i;i=h(t=s),i===a?d[i].p(t,l):(ft(),mt(d[a],1,1,(()=>{d[a]=null})),pt(),o=d[i],o?o.p(t,l):(o=d[i]=u[i](t),o.c()),gt(o,1),o.m(n,null)),(!c||2&l&&r!==(r="interaction-area "+t[1]+" svelte-18vhu7m"))&&U(e,"class",r)},i(n){c||(gt(o),it((()=>{c&&(s||(s=wt(e,Dt,t[6],!0)),s.run(1))})),c=!0)},o(n){mt(o),s||(s=wt(e,Dt,t[6],!1)),s.run(0),c=!1},d(n){n&&P(e),d[i].d(),t[10](null),n&&s&&s.end(),l=!1,a()}}}function re(t,e,n){let i,o,r,{index:s}=e,{store:c}=e;const l=c.oversizedRatio;v(t,l,(t=>n(0,i=t)));const a=c.loading;v(t,a,(t=>n(3,o=t)));const u={delay:150+50*s,duration:250,y:2,easing:Ht};let d;const h=function(){const t=Z();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=B(e,n,{cancelable:i});return o.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}();return t.$$set=t=>{"index"in t&&n(8,s=t.index),"store"in t&&n(9,c=t.store)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=i>4?"high":i>2.5?"medium":"normal")},[i,r,d,o,l,a,u,function(){const t=d.getBoundingClientRect();h("hover",{index:s,position:{top:t.top+t.height+10,left:t.left}})},s,c,function(t){J[t?"unshift":"push"]((()=>{d=t,n(2,d)}))}]}class se extends St{constructor(t){super(),zt(this,t,re,oe,h,{index:8,store:9})}}function ce(t){let e,n;const i=t[2].default,o=function(t,e,n,i){if(t){const o=$(t,e,n,i);return t[0](o)}}(i,t,t[1],null);return{c(){e=j("div"),o&&o.c(),U(e,"class","jetpack-boost-guide-portal")},m(i,r){L(i,e,r),o&&o.m(e,null),t[3](e),n=!0},p(t,[e]){o&&o.p&&(!n||2&e)&&function(t,e,n,i,o,r){if(o){const s=$(e,n,i,r);t.p(s,o)}}(o,i,t,t[1],n?function(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|o[i];return t}return e.dirty|o}return e.dirty}(i,t[1],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[1]),null)},i(t){n||(gt(o,t),n=!0)},o(t){mt(o,t),n=!1},d(n){n&&P(e),o&&o.d(n),t[3](null)}}}function le(t,e,n){let i,{$$slots:o={},$$scope:r}=e;var s;return K((()=>{document.body.appendChild(i)})),s=()=>{document.body.removeChild(i)},Z().$$.on_destroy.push(s),t.$$set=t=>{"$$scope"in t&&n(1,r=t.$$scope)},[i,r,o,function(t){J[t?"unshift":"push"]((()=>{i=t,n(0,i)}))}]}class ae extends St{constructor(t){super(),zt(this,t,le,ce,h,{})}}function ue(t){let e,n;return{c(){e=O("svg"),n=O("path"),U(n,"d","M18.2 17c0 .7-.6 1.2-1.2 1.2H7c-.7 0-1.2-.6-1.2-1.2V7c0-.7.6-1.2 1.2-1.2h3.2V4.2H7C5.5 4.2 4.2 5.5 4.2 7v10c0 1.5 1.2 2.8 2.8 2.8h10c1.5 0 2.8-1.2 2.8-2.8v-3.6h-1.5V17zM14.9 3v1.5h3.7l-6.4 6.4 1.1 1.1 6.4-6.4v3.7h1.5V3h-6.3z"),U(e,"xmlns","http://www.w3.org/2000/svg"),U(e,"viewBox","0 0 24 24"),U(e,"class","svelte-1g2gjwn")},m(t,i){L(t,e,i),S(e,n)},p:s,i:s,o:s,d(t){t&&P(e)}}}class de extends St{constructor(t){super(),zt(this,t,null,ue,h,{})}}const{window:he}=bt;function fe(t){let e,n,i,o,r=t[29]+"";return{c(){e=j("div"),n=T("The image file is "),i=T(r),o=T("x smaller than expected on this screen. This might be\n\t\t\t\t\t\tfine, but you may want to check if the image appears blurry."),U(e,"class","explanation svelte-52p8v6")},m(t,r){L(t,e,r),S(e,n),S(e,i),S(e,o)},p(t,e){8&e&&r!==(r=t[29]+"")&&F(i,r)},d(t){t&&P(e)}}}function pe(t){let e,n,i=t[6]>1&&ve(t);return{c(){e=j("div"),n=T("The image size is very close to the size it appears in the browser.\n\t\t\t\t\t\t"),i&&i.c(),U(e,"class","explanation svelte-52p8v6")},m(t,o){L(t,e,o),S(e,n),i&&i.m(e,null)},p(t,n){t[6]>1?i?i.p(t,n):(i=ve(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(t){t&&P(e),i&&i.d()}}}function ge(t){let e;return{c(){e=j("div"),e.textContent="The image is exactly the correct size for this screen.",U(e,"class","explanation svelte-52p8v6")},m(t,n){L(t,e,n)},p:s,d(t){t&&P(e)}}}function me(t){let e,n,i,o,r,s,c=t[4].weight>450&&$e();return{c(){e=j("div"),n=T("The image loaded is "),i=j("strong"),o=T(t[6]),r=T("x"),s=T(" larger than it appears in the browser.\n\t\t\t\t\t\t"),c&&c.c(),U(e,"class","explanation svelte-52p8v6")},m(t,l){L(t,e,l),S(e,n),S(e,i),S(i,o),S(i,r),S(e,s),c&&c.m(e,null)},p(t,n){64&n&&F(o,t[6]),t[4].weight>450?c||(c=$e(),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(t){t&&P(e),c&&c.d()}}}function ve(t){let e,n,i,o,r;return{c(){e=T("Because there are various screen sizes, it's okay for the image to be\n\t\t\t\t\t\t\t"),n=j("strong"),i=T(t[6]),o=T("x"),r=T(" than it appears on the page.")},m(t,s){L(t,e,s),L(t,n,s),S(n,i),S(n,o),L(t,r,s)},p(t,e){64&e&&F(i,t[6])},d(t){t&&P(e),t&&P(n),t&&P(r)}}}function $e(t){let e;return{c(){e=T("Try using a smaller image or reduce the file size by compressing it.")},m(t,n){L(t,e,n)},d(t){t&&P(e)}}}function we(t){let e,n;return{c(){e=j("img"),p(e.src,n=t[5])||U(e,"src",n),U(e,"alt",t[8]),A(e,"width",t[2]+"px"),A(e,"height",t[7]+"px"),U(e,"width",t[2]),U(e,"height",t[7]),U(e,"class","svelte-52p8v6")},m(t,n){L(t,e,n)},p(t,i){32&i&&!p(e.src,n=t[5])&&U(e,"src",n),256&i&&U(e,"alt",t[8]),4&i&&A(e,"width",t[2]+"px"),128&i&&A(e,"height",t[7]+"px"),4&i&&U(e,"width",t[2]),128&i&&U(e,"height",t[7])},d(t){t&&P(e)}}}function be(t){let e;function n(t,e){return t[16]?ke:xe}let i=n(t),o=i(t);return{c(){e=j("div"),o.c(),U(e,"class","value")},m(t,n){L(t,e,n),o.m(e,null)},p(t,r){i!==(i=n(t))&&(o.d(1),o=i(t),o&&(o.c(),o.m(e,null)))},d(t){t&&P(e),o.d()}}}function ye(t){let e,n,i,o,r=t[4].width+"",s=t[4].height+"";return{c(){e=j("div"),n=T(r),i=T(" x "),o=T(s),U(e,"class","value")},m(t,r){L(t,e,r),S(e,n),S(e,i),S(e,o)},p(t,e){16&e&&r!==(r=t[4].width+"")&&F(n,r),16&e&&s!==(s=t[4].height+"")&&F(o,s)},d(t){t&&P(e)}}}function xe(t){let e;return{c(){e=j("em"),e.textContent="Unknown"},m(t,n){L(t,e,n)},d(t){t&&P(e)}}}function ke(t){let e;return{c(){e=T("Loading...")},m(t,n){L(t,e,n)},d(t){t&&P(e)}}}function _e(t){let e;return{c(){e=j("em"),e.textContent="Unknown"},m(t,n){L(t,e,n)},p:s,d(t){t&&P(e)}}}function ze(t){let e;return{c(){e=T("Loading...")},m(t,n){L(t,e,n)},p:s,d(t){t&&P(e)}}}function Se(t){let e,n,i=Math.round(t[4].weight)+"";return{c(){e=T(i),n=T(" KB")},m(t,i){L(t,e,i),L(t,n,i)},p(t,n){16&n&&i!==(i=Math.round(t[4].weight)+"")&&F(e,i)},d(t){t&&P(e),t&&P(n)}}}function Ce(t){let e;return{c(){e=j("em"),e.textContent="N/A"},m(t,n){L(t,e,n)},p:s,d(t){t&&P(e)}}}function Ee(t){let e;return{c(){e=T("Loading...")},m(t,n){L(t,e,n)},p:s,d(t){t&&P(e)}}}function Le(t){let e,n,i;return{c(){e=j("strong"),n=T(t[19]),i=T(" KB")},m(t,o){L(t,e,o),S(e,n),S(e,i)},p(t,e){524288&e&&F(n,t[19])},d(t){t&&P(e)}}}function Pe(t){let e,n,i,o,r,s,c,l,a,u,d,h,f,p,g,m,v,$,w,b,y,x,k,_,z,C,E,O,R,H,B,N,D,W,V,G,q,Z,K,X,Y,J,Q,tt,et,nt,ot,rt,st,ct,lt,at=t[17].width+"",ut=t[17].height+"",dt=t[18].width+"",ht=t[18].height+"",ft=`${t[0].top}px`,pt=`${t[0].left}px`;function vt(t,e){return t[6]>=1.3?me:1===t[6]?ge:t[6]>=.99&&t[6]<1.3?pe:fe}function wt(t,e){return e===fe?function(t){const e=t.slice(),n=Te(1/e[3]);return e[29]=n,e}(t):t}i=new Gt({props:{size:250}});let bt=vt(t),_t=bt(wt(t,bt)),zt=t[5]&&we(t);function St(t,e){return t[4].width>0&&t[4].height>0?ye:be}let Ct=St(t),Et=Ct(t);function Lt(t,e){return t[4].weight>0?Se:t[16]?ze:_e}let Pt=Lt(t),jt=Pt(t);function Ot(t,e){return t[19]>0?Le:t[16]?Ee:Ce}let Tt=Ot(t),Mt=Tt(t);return ot=new de({}),{c(){e=j("div"),n=j("div"),yt(i.$$.fragment),o=M(),r=j("div"),s=j("div"),c=j("div"),l=j("a"),a=T(t[8]),u=M(),_t.c(),d=M(),zt&&zt.c(),h=M(),f=j("div"),p=j("div"),g=j("div"),g.textContent="Image File Dimensions",m=M(),Et.c(),v=M(),$=j("div"),w=j("div"),w.textContent="Expected Dimensions",b=M(),y=j("div"),x=T(at),k=T(" x "),_=T(ut),z=M(),C=j("div"),E=j("div"),E.textContent="Size on screen",O=M(),R=j("div"),H=T(dt),B=T(" x "),N=T(ht),D=M(),W=j("div"),V=j("div"),V.textContent="Image Size",G=M(),q=j("div"),jt.c(),Z=M(),K=j("div"),X=j("div"),X.textContent="Potential savings",Y=M(),J=j("div"),Mt.c(),Q=M(),tt=j("div"),et=j("a"),nt=T("Learn how to improve site speed by optimizing images "),yt(ot.$$.fragment),U(n,"class","logo svelte-52p8v6"),U(l,"href",t[5]),U(l,"target","_blank noreferrer"),U(l,"class","svelte-52p8v6"),U(c,"class","title svelte-52p8v6"),U(s,"class","description svelte-52p8v6"),U(r,"class","preview svelte-52p8v6"),U(g,"class","label"),U(p,"class","row svelte-52p8v6"),U(w,"class","label"),U(y,"class","value"),U($,"class","row svelte-52p8v6"),U(E,"class","label"),U(R,"class","value"),U(C,"class","row svelte-52p8v6"),U(V,"class","label"),U(q,"class","value"),U(W,"class","row svelte-52p8v6"),U(X,"class","label"),U(J,"class","value"),U(K,"class","row svelte-52p8v6"),U(et,"class","documentation svelte-52p8v6"),U(et,"href",Oe),U(et,"target","_blank noreferrer"),U(tt,"class","info svelte-52p8v6"),U(f,"class","meta"),U(e,"class","jetpack-boost-guide-popup keep-guide-open svelte-52p8v6"),A(e,"top",ft),A(e,"left",pt)},m(P,j){L(P,e,j),S(e,n),xt(i,n,null),S(e,o),S(e,r),S(r,s),S(s,c),S(c,l),S(l,a),S(s,u),_t.m(s,null),S(r,d),zt&&zt.m(r,null),S(e,h),S(e,f),S(f,p),S(p,g),S(p,m),Et.m(p,null),S(f,v),S(f,$),S($,w),S($,b),S($,y),S(y,x),S(y,k),S(y,_),S(f,z),S(f,C),S(C,E),S(C,O),S(C,R),S(R,H),S(R,B),S(R,N),S(f,D),S(f,W),S(W,V),S(W,G),S(W,q),jt.m(q,null),S(f,Z),S(f,K),S(K,X),S(K,Y),S(K,J),Mt.m(J,null),S(f,Q),S(f,tt),S(tt,et),S(et,nt),xt(ot,et,null),st=!0,ct||(lt=I(e,"mouseleave",t[22]),ct=!0)},p(n,i){t=n,(!st||256&i)&&F(a,t[8]),(!st||32&i)&&U(l,"href",t[5]),bt===(bt=vt(t))&&_t?_t.p(wt(t,bt),i):(_t.d(1),_t=bt(wt(t,bt)),_t&&(_t.c(),_t.m(s,null))),t[5]?zt?zt.p(t,i):(zt=we(t),zt.c(),zt.m(r,null)):zt&&(zt.d(1),zt=null),Ct===(Ct=St(t))&&Et?Et.p(t,i):(Et.d(1),Et=Ct(t),Et&&(Et.c(),Et.m(p,null))),(!st||131072&i)&&at!==(at=t[17].width+"")&&F(x,at),(!st||131072&i)&&ut!==(ut=t[17].height+"")&&F(_,ut),(!st||262144&i)&&dt!==(dt=t[18].width+"")&&F(H,dt),(!st||262144&i)&&ht!==(ht=t[18].height+"")&&F(N,ht),Pt===(Pt=Lt(t))&&jt?jt.p(t,i):(jt.d(1),jt=Pt(t),jt&&(jt.c(),jt.m(q,null))),Tt===(Tt=Ot(t))&&Mt?Mt.p(t,i):(Mt.d(1),Mt=Tt(t),Mt&&(Mt.c(),Mt.m(J,null))),1&i&&ft!==(ft=`${t[0].top}px`)&&A(e,"top",ft),1&i&&pt!==(pt=`${t[0].left}px`)&&A(e,"left",pt)},i(t){st||(gt(i.$$.fragment,t),gt(ot.$$.fragment,t),rt||it((()=>{rt=$t(e,Dt,{duration:150,y:4,easing:Ht}),rt.start()})),st=!0)},o(t){mt(i.$$.fragment,t),mt(ot.$$.fragment,t),st=!1},d(t){t&&P(e),kt(i),_t.d(),zt&&zt.d(),Et.d(),jt.d(),Mt.d(),kt(ot),ct=!1,lt()}}}function je(t){let e,n,i,o,r,s=!1,c=()=>{s=!1};return it(t[23]),n=new ae({props:{$$slots:{default:[Pe]},$$scope:{ctx:t}}}),{c(){yt(n.$$.fragment)},m(l,a){xt(n,l,a),i=!0,o||(r=I(he,"scroll",(()=>{s=!0,clearTimeout(e),e=setTimeout(c,100),t[23]()})),o=!0)},p(t,[i]){2&i&&!s&&(s=!0,clearTimeout(e),scrollTo(he.pageXOffset,t[1]),e=setTimeout(c,100));const o={};1074725373&i&&(o.$$scope={dirty:i,ctx:t}),n.$set(o)},i(t){i||(gt(n.$$.fragment,t),i=!0)},o(t){mt(n.$$.fragment,t),i=!1},d(t){kt(n,t),o=!1,r()}}}const Oe="https://jetpack.com/support/jetpack-boost/image-performance-guide/";function Te(t){return t%1==0?t:parseFloat(t.toFixed(2))}function Me(t,e,n){let i,o,r,c,l,a,u,d,h,f,p,m,v,$,w,b,y,x,k=s,_=s,z=s,S=s,C=s,E=s,L=s;t.$$.on_destroy.push((()=>k())),t.$$.on_destroy.push((()=>_())),t.$$.on_destroy.push((()=>z())),t.$$.on_destroy.push((()=>S())),t.$$.on_destroy.push((()=>C())),t.$$.on_destroy.push((()=>E())),t.$$.on_destroy.push((()=>L()));let{store:P}=e,{size:j}=e,{position:O}=e,T=0,M=0,R=0;return K((()=>{M=T,R=O.top})),t.$$set=t=>{"store"in t&&n(20,P=t.store),"size"in t&&n(21,j=t.size),"position"in t&&n(0,O=t.position)},t.$$.update=()=>{var e;1048576&t.$$.dirty&&(n(15,i=P.loading),S(),S=g(i,(t=>n(16,w=t)))),1048576&t.$$.dirty&&(n(14,o=P.oversizedRatio),k(),k=g(o,(t=>n(3,m=t)))),1048576&t.$$.dirty&&(n(13,r=P.fileSize),_(),_=g(r,(t=>n(4,v=t)))),1048576&t.$$.dirty&&(n(12,c=P.sizeOnPage),E(),E=g(c,(t=>n(18,y=t)))),1048576&t.$$.dirty&&(n(11,l=P.potentialSavings),L(),L=g(l,(t=>n(19,x=t)))),1048576&t.$$.dirty&&(n(10,a=P.expectedSize),C(),C=g(a,(t=>n(17,b=t)))),1048576&t.$$.dirty&&(n(9,u=P.url),z(),z=g(u,(t=>n(5,$=t)))),32&t.$$.dirty&&n(8,d=$.split("/").pop()),32&t.$$.dirty&&new URL($).origin,2097152&t.$$.dirty&&n(2,h="normal"===j?100:50),20&t.$$.dirty&&n(7,f=Math.floor(h/(v.width/v.height))),8&t.$$.dirty&&n(6,p=Te(m)),2&t.$$.dirty&&0!==(e=T)&&M!==e&&n(0,O.top=R+(M-e),O)},new URL(window.location.href).origin,[O,T,h,m,v,$,p,f,d,u,a,l,c,r,o,i,w,b,y,x,P,j,function(e){X.call(this,t,e)},function(){n(1,T=he.pageYOffset)}]}class Re extends St{constructor(t){super(),zt(this,t,Me,je,h,{store:20,size:21,position:0})}}function Ie(t,e,n){const i=t.slice();return i[10]=e[n],i[12]=n,i}function Ue(t){let e,n,i,o,r,s,c,l=t[0],a=[];for(let e=0;e<l.length;e+=1)a[e]=Fe(Ie(t,l,e));const u=t=>mt(a[t],1,1,(()=>{a[t]=null}));let d=!1!==t[1]&&Ae(t);return{c(){e=j("div"),n=j("div");for(let t=0;t<a.length;t+=1)a[t].c();i=M(),d&&d.c(),U(n,"class","previews svelte-1828btn"),U(e,"class",o="guide "+t[3]+" svelte-1828btn"),H(e,"show",!1!==t[1]),H(e,"keep-guide-open",!1!==t[1])},m(o,l){L(o,e,l),S(e,n);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(n,null);S(e,i),d&&d.m(e,null),r=!0,s||(c=I(e,"mouseleave",t[5]),s=!0)},p(t,i){if(129&i){let e;for(l=t[0],e=0;e<l.length;e+=1){const o=Ie(t,l,e);a[e]?(a[e].p(o,i),gt(a[e],1)):(a[e]=Fe(o),a[e].c(),gt(a[e],1),a[e].m(n,null))}for(ft(),e=l.length;e<a.length;e+=1)u(e);pt()}!1!==t[1]?d?(d.p(t,i),2&i&&gt(d,1)):(d=Ae(t),d.c(),gt(d,1),d.m(e,null)):d&&(ft(),mt(d,1,1,(()=>{d=null})),pt()),(!r||8&i&&o!==(o="guide "+t[3]+" svelte-1828btn"))&&U(e,"class",o),(!r||10&i)&&H(e,"show",!1!==t[1]),(!r||10&i)&&H(e,"keep-guide-open",!1!==t[1])},i(t){if(!r){for(let t=0;t<l.length;t+=1)gt(a[t]);gt(d),r=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)mt(a[t]);mt(d),r=!1},d(t){t&&P(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(a,t),d&&d.d(),s=!1,c()}}}function Fe(t){let e,n;return e=new se({props:{index:t[12],store:t[10]}}),e.$on("hover",t[7]),{c(){yt(e.$$.fragment)},m(t,i){xt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.store=t[10]),e.$set(i)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){kt(e,t)}}}function Ae(t){let e,n;return e=new Re({props:{store:t[0][t[1]],size:t[3],position:t[2]}}),e.$on("mouseleave",t[5]),{c(){yt(e.$$.fragment)},m(t,i){xt(e,t,i),n=!0},p(t,n){const i={};3&n&&(i.store=t[0][t[1]]),8&n&&(i.size=t[3]),4&n&&(i.position=t[2]),e.$set(i)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){kt(e,t)}}}function He(t){let e,n,i="active"===t[4]&&Ue(t);return{c(){i&&i.c(),e=R()},m(t,o){i&&i.m(t,o),L(t,e,o),n=!0},p(t,[n]){"active"===t[4]?i?(i.p(t,n),16&n&&gt(i,1)):(i=Ue(t),i.c(),gt(i,1),i.m(e.parentNode,e)):i&&(ft(),mt(i,1,1,(()=>{i=null})),pt())},i(t){n||(gt(i),n=!0)},o(t){mt(i),n=!1},d(t){i&&i.d(t),t&&P(e)}}}function Be(t,e,n){let i,o,r;v(t,It,(t=>n(4,r=t)));let{stores:s}=e,c=!1;K((()=>{s.forEach((t=>t.updateDimensions()))}));const l=s[0].sizeOnPage;v(t,l,(t=>n(8,o=t)));let a={top:0,left:0};return t.$$set=t=>{"stores"in t&&n(0,s=t.stores)},t.$$.update=()=>{256&t.$$.dirty&&n(3,i=function(t=-1,e=-1){return t<200||e<200?"micro":t<400||e<400?"small":"normal"}(o.width,o.height)),2&t.$$.dirty&&function(t=!1){t?s.forEach((t=>t.node.classList.add("jetpack-boost-guide__backdrop"))):s.forEach((t=>t.node.classList.remove("jetpack-boost-guide__backdrop")))}(!1!==c)},[s,c,a,i,r,function(t){t.relatedTarget&&t.relatedTarget.classList.contains("keep-guide-open")||n(1,c=!1)},l,function(t){const e=t.detail,i=e.index;n(2,a=e.position),n(1,c=i)},o]}class Ne extends St{constructor(t){super(),zt(this,t,Be,He,h,{stores:0})}}const De=[];let We;function Ve(t){window.frameElement||(We=t,window.addEventListener("load",Ge))}function Ge(){window.addEventListener("resize",function(){let t;return()=>{t&&clearTimeout(t),t=setTimeout((()=>{De.forEach((t=>{t.updateDimensions()}))}),500)}}()),Ft.trackInitialState(),It.subscribe((e=>t(this,void 0,void 0,(function*(){if("paused"===e)return;const t=yield o(Array.from(document.querySelectorAll("body *:not(.jetpack-boost-guide > *):not(.jetpack-boost-guide)")),We),n=yield Promise.all(t.map((t=>t.isImageTiny())));De.push(...function(t){const e=t.reduce(((t,e)=>{var n;if(!e.node.parentNode)return console.error("Image has no parent",e.node),t;const i=function(t){const e=t.node;if(!(t.node instanceof HTMLImageElement)&&["static","relative"].includes(getComputedStyle(e).position))return e.classList.contains("jetpack-boost-guide")||(e.classList.add("jetpack-boost-guide","relative"),e.dataset.jetpackBoostGuideId=(++qe).toString()),e;if(!e.parentNode||!e.parentElement)return;const n=function(t){let e,n=t.parentElement;for(;n&&n instanceof HTMLElement&&n!==document.body;){const t=getComputedStyle(n),i="inline"!==t.display,o="static"===t.position,r="relative"===t.position,s="auto"!==t.zIndex;i&&(!e&&(o||r)||r&&s)&&(e=n),n=n.parentElement}return e}(e);if(null==n?void 0:n.classList.contains("jetpack-boost-guide"))return n;if(n){const e=getComputedStyle(n);if("relative"===e.position){const t=Array.from(n.children).find((t=>t.classList.contains("jetpack-boost-guide")));if(t&&t instanceof HTMLElement)return t}const i=document.createElement("div");return i.classList.add("jetpack-boost-guide"),i.dataset.jetpackBoostGuideId=(++qe).toString(),"static"===e.position&&(n.style.position="relative"),t.node instanceof HTMLImageElement&&(i.style.top=`${t.node.offsetTop}px`),n.prepend(i),i}return e.parentElement}(e);if(!i)return console.error("Could not find a parent for image",e),t;const o=parseInt(i.dataset.jetpackBoostGuideId||""),r=(null===(n=t[o])||void 0===n?void 0:n.props.stores)||[],s=new At(e);return r.push(s),1===r.length&&(t[o]={target:i,intro:!0,props:{stores:r}}),t}),{});return Object.values(e).map((t=>(new Ne(t),t.props.stores))).flat()}(t.filter(((t,e)=>!n[e])))),Ft.trackPage(De)}))))}let qe=0;function Ze(t){let e,n,i,o,r,s,c,l,a,u;return n=new Gt({}),{c(){e=j("a"),yt(n.$$.fragment),i=M(),o=j("span"),r=T("Image Guide: "),s=T(t[2]),U(e,"id","jetpack-boost-guide-bar"),U(e,"href",t[0]),U(e,"class",c="ab-item "+t[1]+" svelte-itog5b")},m(c,d){var h;L(c,e,d),xt(n,e,null),S(e,i),S(e,o),S(o,r),S(o,s),l=!0,a||(u=I(e,"click",(h=t[3],function(t){return t.preventDefault(),h.call(this,t)})),a=!0)},p(t,[n]){(!l||4&n)&&F(s,t[2]),(!l||1&n)&&U(e,"href",t[0]),(!l||2&n&&c!==(c="ab-item "+t[1]+" svelte-itog5b"))&&U(e,"class",c)},i(t){l||(gt(n.$$.fragment,t),l=!0)},o(t){mt(n.$$.fragment,t),l=!1},d(t){t&&P(e),kt(n),a=!1,u()}}}function Ke(t,e,n){let i,o;v(t,It,(t=>n(1,i=t))),v(t,Ut,(t=>n(2,o=t)));let{href:r}=e,{tracksCallback:s}=e;return t.$$set=t=>{"href"in t&&n(0,r=t.href),"tracksCallback"in t&&n(4,s=t.tracksCallback)},t.$$.update=()=>{16&t.$$.dirty&&Ft.setTracksCallback(s)},[r,i,o,function(){It.cycle(),Ft.trackUIStateChange()},s]}class Xe extends St{constructor(t){super(),zt(this,t,Ke,Ze,h,{href:0,tracksCallback:4})}}function Ye(t,{href:e,tracksCallback:n,fetchFunction:i}){return Ve(i),new Xe({target:t,props:{href:e,tracksCallback:n}})}export{e as MeasurableImage,o as getMeasurableImages,Ye as setupImageGuideUI};
